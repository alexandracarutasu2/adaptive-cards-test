{"id":"../../node_modules/adaptivecards/lib/card-object.js","dependencies":[{"name":"C:\\Users\\t-acruau\\node_modules\\adaptivecards\\lib\\card-object.js.map","includedInParent":true,"mtime":1689085533832},{"name":"C:\\Users\\t-acruau\\node_modules\\adaptivecards\\src\\card-object.ts","includedInParent":true,"mtime":1689085533983},{"name":"C:\\Users\\t-acruau\\adaptive-cards\\package.json","includedInParent":true,"mtime":1689259513501},{"name":"C:\\Users\\t-acruau\\node_modules\\adaptivecards\\package.json","includedInParent":true,"mtime":1689085533782},{"name":"./enums","loc":{"line":27,"column":20,"index":1585},"parent":"C:\\Users\\t-acruau\\node_modules\\adaptivecards\\lib\\card-object.js","resolved":"C:\\Users\\t-acruau\\node_modules\\adaptivecards\\lib\\enums.js"},{"name":"./strings","loc":{"line":28,"column":24,"index":1621},"parent":"C:\\Users\\t-acruau\\node_modules\\adaptivecards\\lib\\card-object.js","resolved":"C:\\Users\\t-acruau\\node_modules\\adaptivecards\\lib\\strings.js"},{"name":"./shared","loc":{"line":29,"column":23,"index":1658},"parent":"C:\\Users\\t-acruau\\node_modules\\adaptivecards\\lib\\card-object.js","resolved":"C:\\Users\\t-acruau\\node_modules\\adaptivecards\\lib\\shared.js"},{"name":"./host-capabilities","loc":{"line":30,"column":34,"index":1705},"parent":"C:\\Users\\t-acruau\\node_modules\\adaptivecards\\lib\\card-object.js","resolved":"C:\\Users\\t-acruau\\node_modules\\adaptivecards\\lib\\host-capabilities.js"},{"name":"./serialization","loc":{"line":31,"column":30,"index":1759},"parent":"C:\\Users\\t-acruau\\node_modules\\adaptivecards\\lib\\card-object.js","resolved":"C:\\Users\\t-acruau\\node_modules\\adaptivecards\\lib\\serialization.js"}],"generated":{"js":"\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CardObject = exports.ValidationResults = void 0;\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nvar Enums = require(\"./enums\");\nvar strings_1 = require(\"./strings\");\nvar shared_1 = require(\"./shared\");\nvar host_capabilities_1 = require(\"./host-capabilities\");\nvar serialization_1 = require(\"./serialization\");\nvar ValidationResults = /** @class */ (function () {\n    function ValidationResults() {\n        this.allIds = {};\n        this.validationEvents = [];\n    }\n    ValidationResults.prototype.addFailure = function (cardObject, event, message) {\n        this.validationEvents.push({\n            phase: Enums.ValidationPhase.Validation,\n            source: cardObject,\n            event: event,\n            message: message\n        });\n    };\n    return ValidationResults;\n}());\nexports.ValidationResults = ValidationResults;\nvar CardObject = /** @class */ (function (_super) {\n    __extends(CardObject, _super);\n    function CardObject() {\n        //#region Schema\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        //#endregion\n        _this._shouldFallback = false;\n        return _this;\n    }\n    CardObject.prototype.getSchemaKey = function () {\n        return this.getJsonTypeName();\n    };\n    Object.defineProperty(CardObject.prototype, \"requires\", {\n        get: function () {\n            return this.getValue(CardObject.requiresProperty);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Checks if this CardObject contains the given DOM Node.\n     * @param node The DOM Node to look for.\n     * @returns `true` if the DOM Node was found, `false` otherwise.\n     */\n    CardObject.prototype.contains = function (node) {\n        if (this._renderedElement) {\n            return this._renderedElement.contains(node);\n        }\n        return false;\n    };\n    CardObject.prototype.preProcessPropertyValue = function (prop, propertyValue) {\n        var value = propertyValue === undefined ? this.getValue(prop) : propertyValue;\n        if (shared_1.GlobalSettings.allowPreProcessingPropertyValues) {\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            var currentObject = this;\n            while (currentObject && !currentObject.onPreProcessPropertyValue) {\n                currentObject = currentObject.parent;\n            }\n            if (currentObject && currentObject.onPreProcessPropertyValue) {\n                return currentObject.onPreProcessPropertyValue(this, prop, value);\n            }\n        }\n        return value;\n    };\n    CardObject.prototype.setParent = function (value) {\n        this._parent = value;\n    };\n    CardObject.prototype.setShouldFallback = function (value) {\n        this._shouldFallback = value;\n    };\n    CardObject.prototype.shouldFallback = function () {\n        return this._shouldFallback || !this.requires.areAllMet(this.hostConfig.hostCapabilities);\n    };\n    CardObject.prototype.getRootObject = function () {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var currentObject = this;\n        while (currentObject.parent) {\n            currentObject = currentObject.parent;\n        }\n        return currentObject;\n    };\n    CardObject.prototype.internalValidateProperties = function (context) {\n        if (this.id) {\n            if (context.allIds.hasOwnProperty(this.id)) {\n                if (context.allIds[this.id] === 1) {\n                    context.addFailure(this, Enums.ValidationEvent.DuplicateId, strings_1.Strings.errors.duplicateId(this.id));\n                }\n                context.allIds[this.id] += 1;\n            }\n            else {\n                context.allIds[this.id] = 1;\n            }\n        }\n    };\n    CardObject.prototype.validateProperties = function () {\n        var result = new ValidationResults();\n        this.internalValidateProperties(result);\n        return result;\n    };\n    /**\n     * Recursively searches this CardObject and any children to find the\n     * innermost CardObject that owns the given DOM Node.\n     *\n     * @param node The DOM Node to look for.\n     *\n     * @returns The owner of the given DOM Node, or `undefined` if no owner was found.\n     */\n    CardObject.prototype.findDOMNodeOwner = function (node) {\n        // default implementation for CardObjects with no associated children\n        return this.contains(node) ? this : undefined;\n    };\n    CardObject.prototype.releaseDOMResources = function () {\n        // Do nothing in base implementation\n    };\n    Object.defineProperty(CardObject.prototype, \"parent\", {\n        get: function () {\n            return this._parent;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CardObject.prototype, \"renderedElement\", {\n        get: function () {\n            return this._renderedElement;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CardObject.typeNameProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"type\", undefined, undefined, undefined, function (sender) {\n        return sender.getJsonTypeName();\n    });\n    CardObject.idProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"id\");\n    CardObject.requiresProperty = new serialization_1.SerializableObjectProperty(serialization_1.Versions.v1_2, \"requires\", host_capabilities_1.HostCapabilities, false, new host_capabilities_1.HostCapabilities());\n    __decorate([\n        (0, serialization_1.property)(CardObject.idProperty)\n    ], CardObject.prototype, \"id\", void 0);\n    __decorate([\n        (0, serialization_1.property)(CardObject.requiresProperty)\n    ], CardObject.prototype, \"requires\", null);\n    return CardObject;\n}(serialization_1.SerializableObject));\nexports.CardObject = CardObject;\n"},"sourceMaps":{"js":{"version":3,"file":"card-object.js","sourceRoot":"","sources":["../src/card-object.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nimport * as Enums from \"./enums\";\nimport { Strings } from \"./strings\";\nimport { Dictionary, GlobalSettings } from \"./shared\";\nimport { HostConfig } from \"./host-config\";\nimport { HostCapabilities } from \"./host-capabilities\";\nimport {\n    Versions,\n    property,\n    SerializableObject,\n    StringProperty,\n    SerializableObjectProperty,\n    IValidationEvent,\n    PropertyDefinition\n} from \"./serialization\";\n\nexport class ValidationResults {\n    readonly allIds: Dictionary<number> = {};\n    readonly validationEvents: IValidationEvent[] = [];\n\n    addFailure(cardObject: CardObject, event: Enums.ValidationEvent, message: string) {\n        this.validationEvents.push({\n            phase: Enums.ValidationPhase.Validation,\n            source: cardObject,\n            event: event,\n            message: message\n        });\n    }\n}\n\nexport type CardObjectType = { new (): CardObject };\n\nexport abstract class CardObject extends SerializableObject {\n    //#region Schema\n\n    static readonly typeNameProperty = new StringProperty(\n        Versions.v1_0,\n        \"type\",\n        undefined,\n        undefined,\n        undefined,\n        (sender: object) => {\n            return (<CardObject>sender).getJsonTypeName();\n        }\n    );\n    static readonly idProperty = new StringProperty(Versions.v1_0, \"id\");\n    static readonly requiresProperty = new SerializableObjectProperty(\n        Versions.v1_2,\n        \"requires\",\n        HostCapabilities,\n        false,\n        new HostCapabilities()\n    );\n\n    protected getSchemaKey(): string {\n        return this.getJsonTypeName();\n    }\n\n    @property(CardObject.idProperty)\n    id?: string;\n\n    @property(CardObject.requiresProperty)\n    get requires(): HostCapabilities {\n        return this.getValue(CardObject.requiresProperty);\n    }\n\n    //#endregion\n\n    private _shouldFallback: boolean = false;\n\n    protected _parent?: CardObject;\n    protected _renderedElement?: HTMLElement;\n\n    /**\n     * Checks if this CardObject contains the given DOM Node.\n     * @param node The DOM Node to look for.\n     * @returns `true` if the DOM Node was found, `false` otherwise.\n     */\n    protected contains(node: Node): boolean {\n        if (this._renderedElement) {\n            return this._renderedElement.contains(node);\n        }\n\n        return false;\n    }\n\n    onPreProcessPropertyValue?: (\n        sender: CardObject,\n        property: PropertyDefinition,\n        value: any\n    ) => any;\n\n    abstract getJsonTypeName(): string;\n\n    abstract get hostConfig(): HostConfig;\n\n    preProcessPropertyValue(prop: PropertyDefinition, propertyValue?: any): any {\n        const value = propertyValue === undefined ? this.getValue(prop) : propertyValue;\n\n        if (GlobalSettings.allowPreProcessingPropertyValues) {\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            let currentObject: CardObject | undefined = this;\n\n            while (currentObject && !currentObject.onPreProcessPropertyValue) {\n                currentObject = currentObject.parent;\n            }\n\n            if (currentObject && currentObject.onPreProcessPropertyValue) {\n                return currentObject.onPreProcessPropertyValue(this, prop, value);\n            }\n        }\n\n        return value;\n    }\n\n    setParent(value: CardObject | undefined) {\n        this._parent = value;\n    }\n\n    setShouldFallback(value: boolean) {\n        this._shouldFallback = value;\n    }\n\n    shouldFallback(): boolean {\n        return this._shouldFallback || !this.requires.areAllMet(this.hostConfig.hostCapabilities);\n    }\n\n    getRootObject(): CardObject {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        let currentObject: CardObject = this;\n\n        while (currentObject.parent) {\n            currentObject = currentObject.parent;\n        }\n\n        return currentObject;\n    }\n\n    internalValidateProperties(context: ValidationResults) {\n        if (this.id) {\n            if (context.allIds.hasOwnProperty(this.id)) {\n                if (context.allIds[this.id] === 1) {\n                    context.addFailure(\n                        this,\n                        Enums.ValidationEvent.DuplicateId,\n                        Strings.errors.duplicateId(this.id)\n                    );\n                }\n\n                context.allIds[this.id] += 1;\n            } else {\n                context.allIds[this.id] = 1;\n            }\n        }\n    }\n\n    validateProperties(): ValidationResults {\n        const result = new ValidationResults();\n\n        this.internalValidateProperties(result);\n\n        return result;\n    }\n\n    /**\n     * Recursively searches this CardObject and any children to find the\n     * innermost CardObject that owns the given DOM Node.\n     *\n     * @param node The DOM Node to look for.\n     *\n     * @returns The owner of the given DOM Node, or `undefined` if no owner was found.\n     */\n    findDOMNodeOwner(node: Node): CardObject | undefined {\n        // default implementation for CardObjects with no associated children\n        return this.contains(node) ? this : undefined;\n    }\n\n    releaseDOMResources() {\n        // Do nothing in base implementation\n    }\n\n    get parent(): CardObject | undefined {\n        return this._parent;\n    }\n\n    get renderedElement(): HTMLElement | undefined {\n        return this._renderedElement;\n    }\n}\n"]}},"error":null,"hash":"676f000d05ef292b197007ab8cb2839d","cacheData":{"env":{}}}