{"id":"../../node_modules/adaptivecards/lib/carousel.js","dependencies":[{"name":"C:\\Users\\t-acruau\\node_modules\\adaptivecards\\lib\\carousel.js.map","includedInParent":true,"mtime":1689085533832},{"name":"C:\\Users\\t-acruau\\node_modules\\adaptivecards\\src\\carousel.ts","includedInParent":true,"mtime":1689085534001},{"name":"C:\\Users\\t-acruau\\adaptive-cards\\package.json","includedInParent":true,"mtime":1689259513501},{"name":"C:\\Users\\t-acruau\\node_modules\\adaptivecards\\package.json","includedInParent":true,"mtime":1689085533782},{"name":"./card-elements","loc":{"line":36,"column":30,"index":1993},"parent":"C:\\Users\\t-acruau\\node_modules\\adaptivecards\\lib\\carousel.js","resolved":"C:\\Users\\t-acruau\\node_modules\\adaptivecards\\lib\\card-elements.js"},{"name":"./enums","loc":{"line":40,"column":22,"index":2157},"parent":"C:\\Users\\t-acruau\\node_modules\\adaptivecards\\lib\\carousel.js","resolved":"C:\\Users\\t-acruau\\node_modules\\adaptivecards\\lib\\enums.js"},{"name":"./serialization","loc":{"line":38,"column":30,"index":2075},"parent":"C:\\Users\\t-acruau\\node_modules\\adaptivecards\\lib\\carousel.js","resolved":"C:\\Users\\t-acruau\\node_modules\\adaptivecards\\lib\\serialization.js"},{"name":"./registry","loc":{"line":39,"column":25,"index":2120},"parent":"C:\\Users\\t-acruau\\node_modules\\adaptivecards\\lib\\carousel.js","resolved":"C:\\Users\\t-acruau\\node_modules\\adaptivecards\\lib\\registry.js"},{"name":"./strings","loc":{"line":41,"column":24,"index":2193},"parent":"C:\\Users\\t-acruau\\node_modules\\adaptivecards\\lib\\carousel.js","resolved":"C:\\Users\\t-acruau\\node_modules\\adaptivecards\\lib\\strings.js"},{"name":"swiper","loc":{"line":42,"column":23,"index":2230},"parent":"C:\\Users\\t-acruau\\node_modules\\adaptivecards\\lib\\carousel.js","resolved":"C:\\Users\\t-acruau\\node_modules\\swiper\\swiper.esm.js"},{"name":"./utils","loc":{"line":43,"column":20,"index":2261},"parent":"C:\\Users\\t-acruau\\node_modules\\adaptivecards\\lib\\carousel.js","resolved":"C:\\Users\\t-acruau\\node_modules\\adaptivecards\\lib\\utils.js"},{"name":"./shared","loc":{"line":44,"column":23,"index":2296},"parent":"C:\\Users\\t-acruau\\node_modules\\adaptivecards\\lib\\carousel.js","resolved":"C:\\Users\\t-acruau\\node_modules\\adaptivecards\\lib\\shared.js"}],"generated":{"js":"\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CarouselEvent = exports.Carousel = exports.CarouselPage = void 0;\n// Copyright (C) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nvar card_elements_1 = require(\"./card-elements\");\nvar Enums = require(\"./enums\");\nvar serialization_1 = require(\"./serialization\");\nvar registry_1 = require(\"./registry\");\nvar enums_1 = require(\"./enums\");\nvar strings_1 = require(\"./strings\");\nvar swiper_1 = require(\"swiper\");\nvar Utils = require(\"./utils\");\nvar shared_1 = require(\"./shared\");\n// Note: to function correctly, consumers need to have CSS from swiper/css, swiper/css/pagination, and\n// swiper/css/navigation\nvar CarouselPage = /** @class */ (function (_super) {\n    __extends(CarouselPage, _super);\n    function CarouselPage() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    //#region Schema\n    CarouselPage.prototype.populateSchema = function (schema) {\n        _super.prototype.populateSchema.call(this, schema);\n        // `style`, `bleed`, `isVisible` are not supported in CarouselPage\n        schema.remove(card_elements_1.Container.styleProperty);\n        schema.remove(card_elements_1.Container.bleedProperty);\n        schema.remove(card_elements_1.Container.isVisibleProperty);\n    };\n    //#endregion\n    CarouselPage.prototype.internalRender = function () {\n        var carouselSlide = document.createElement(\"div\");\n        carouselSlide.className = this.hostConfig.makeCssClassName(\"swiper-slide\");\n        // `isRtl()` will set the correct value of rtl by reading the value from the parents\n        this.rtl = this.isRtl();\n        var renderedElement = _super.prototype.internalRender.call(this);\n        Utils.appendChild(carouselSlide, renderedElement);\n        return carouselSlide;\n    };\n    CarouselPage.prototype.getForbiddenActionTypes = function () {\n        return [card_elements_1.ShowCardAction, card_elements_1.ToggleVisibilityAction];\n    };\n    CarouselPage.prototype.getForbiddenChildElements = function () {\n        return this.forbiddenChildElements();\n    };\n    CarouselPage.prototype.forbiddenChildElements = function () {\n        return __spreadArray([\n            card_elements_1.ToggleVisibilityAction.JsonTypeName,\n            card_elements_1.ShowCardAction.JsonTypeName,\n            \"Media\",\n            \"ActionSet\",\n            \"Input.Text\",\n            \"Input.Date\",\n            \"Input.Time\",\n            \"Input.Number\",\n            \"Input.ChoiceSet\",\n            \"Input.Toggle\",\n            \"Carousel\"\n        ], _super.prototype.forbiddenChildElements.call(this), true);\n    };\n    CarouselPage.prototype.internalParse = function (source, context) {\n        _super.prototype.internalParse.call(this, source, context);\n        this.setShouldFallback(false);\n    };\n    CarouselPage.prototype.shouldSerialize = function (_context) {\n        return true;\n    };\n    CarouselPage.prototype.getJsonTypeName = function () {\n        return \"CarouselPage\";\n    };\n    Object.defineProperty(CarouselPage.prototype, \"isStandalone\", {\n        get: function () {\n            return false;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CarouselPage.prototype, \"hasVisibleSeparator\", {\n        get: function () {\n            return false;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return CarouselPage;\n}(card_elements_1.Container));\nexports.CarouselPage = CarouselPage;\nvar Carousel = /** @class */ (function (_super) {\n    __extends(Carousel, _super);\n    function Carousel() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.carouselLoop = true;\n        _this.carouselOrientation = Enums.Orientation.Horizontal;\n        _this._pages = [];\n        _this._currentIndex = 0;\n        _this._previousEventType = Enums.CarouselInteractionEvent.Pagination;\n        return _this;\n    }\n    //#region Schema\n    Carousel.prototype.populateSchema = function (schema) {\n        _super.prototype.populateSchema.call(this, schema);\n        // `style`, `bleed`, `isVisible` are not supported in Carousel\n        schema.remove(card_elements_1.Container.styleProperty);\n        schema.remove(card_elements_1.Container.bleedProperty);\n        schema.remove(card_elements_1.Container.isVisibleProperty);\n    };\n    Object.defineProperty(Carousel.prototype, \"timer\", {\n        get: function () {\n            var timer = this.getValue(Carousel.timerProperty);\n            if (timer && timer < this.hostConfig.carousel.minAutoplayDelay) {\n                console.warn(strings_1.Strings.errors.tooLittleTimeDelay);\n                timer = this.hostConfig.carousel.minAutoplayDelay;\n            }\n            return timer;\n        },\n        set: function (value) {\n            if (value && value < this.hostConfig.carousel.minAutoplayDelay) {\n                console.warn(strings_1.Strings.errors.tooLittleTimeDelay);\n                this.setValue(Carousel.timerProperty, this.hostConfig.carousel.minAutoplayDelay);\n            }\n            else {\n                this.setValue(Carousel.timerProperty, value);\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Carousel.prototype, \"initialPageIndex\", {\n        get: function () {\n            return this.getValue(Carousel.initialPageProperty);\n        },\n        set: function (value) {\n            if (this.isValidParsedPageIndex(value)) {\n                this.setValue(Carousel.initialPageProperty, value);\n            }\n            else {\n                console.warn(strings_1.Strings.errors.invalidInitialPageIndex(value));\n                this.setValue(Carousel.initialPageProperty, 0);\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Carousel.prototype.isValidParsedPageIndex = function (index) {\n        return this._pages ? this.isValidPageIndex(index, this._pages.length) : false;\n    };\n    Carousel.prototype.isValidRenderedPageIndex = function (index) {\n        return this._renderedPages ? this.isValidPageIndex(index, this._renderedPages.length) : false;\n    };\n    Carousel.prototype.isValidPageIndex = function (index, collectionSize) {\n        return (collectionSize > 0 && 0 <= index && index < collectionSize);\n    };\n    Object.defineProperty(Carousel.prototype, \"previousEventType\", {\n        //#endregion\n        get: function () {\n            return this._previousEventType;\n        },\n        set: function (eventType) {\n            this._previousEventType = eventType;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    // Question: Why do we place this on the Carousel instead of the CarouselPage?\n    Carousel.prototype.forbiddenChildElements = function () {\n        return __spreadArray([\n            card_elements_1.ToggleVisibilityAction.JsonTypeName,\n            card_elements_1.ShowCardAction.JsonTypeName,\n            \"Media\",\n            \"ActionSet\",\n            \"Input.Text\",\n            \"Input.Date\",\n            \"Input.Time\",\n            \"Input.Number\",\n            \"Input.ChoiceSet\",\n            \"Input.Toggle\"\n        ], _super.prototype.forbiddenChildElements.call(this), true);\n    };\n    Carousel.prototype.adjustRenderedElementSize = function (renderedElement) {\n        _super.prototype.adjustRenderedElementSize.call(this, renderedElement);\n        if (this.height == \"stretch\" && this._containerForAdorners !== undefined) {\n            this._containerForAdorners.style.height = \"100%\";\n        }\n        // Assign the explicit height to carouselPageContainer if given\n        if (this.carouselHeight) {\n            this._carouselPageContainer.style.height = this.carouselHeight + \"px\";\n        }\n    };\n    Carousel.prototype.getJsonTypeName = function () {\n        return \"Carousel\";\n    };\n    Carousel.prototype.getItemCount = function () {\n        return this._pages.length;\n    };\n    Carousel.prototype.getItemAt = function (index) {\n        return this._pages[index];\n    };\n    Carousel.prototype.addPage = function (page) {\n        this._pages.push(page);\n        page.setParent(this);\n    };\n    Carousel.prototype.removeItem = function (item) {\n        if (item instanceof CarouselPage) {\n            var itemIndex = this._pages.indexOf(item);\n            if (itemIndex >= 0) {\n                this._pages.splice(itemIndex, 1);\n                item.setParent(undefined);\n                this.updateLayout();\n                return true;\n            }\n        }\n        return false;\n    };\n    Carousel.prototype.getFirstVisibleRenderedItem = function () {\n        var _a;\n        if (this.renderedElement && ((_a = this._renderedPages) === null || _a === void 0 ? void 0 : _a.length) > 0) {\n            return this._renderedPages[0];\n        }\n        else {\n            return undefined;\n        }\n    };\n    Carousel.prototype.getLastVisibleRenderedItem = function () {\n        var _a;\n        if (this.renderedElement && ((_a = this._renderedPages) === null || _a === void 0 ? void 0 : _a.length) > 0) {\n            return this._renderedPages[this._renderedPages.length - 1];\n        }\n        else {\n            return undefined;\n        }\n    };\n    Object.defineProperty(Carousel.prototype, \"currentPageId\", {\n        get: function () {\n            var _a, _b;\n            if ((_b = (_a = this._carousel) === null || _a === void 0 ? void 0 : _a.slides) === null || _b === void 0 ? void 0 : _b.length) {\n                var activeSlide = this._carousel.slides[this._carousel.activeIndex];\n                return activeSlide.id;\n            }\n            return undefined;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Carousel.prototype, \"currentPageIndex\", {\n        get: function () {\n            var _a;\n            return (_a = this._carousel) === null || _a === void 0 ? void 0 : _a.realIndex;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Carousel.prototype.internalParse = function (source, context) {\n        _super.prototype.internalParse.call(this, source, context);\n        this._pages = [];\n        var jsonPages = source[\"pages\"];\n        if (Array.isArray(jsonPages)) {\n            for (var _i = 0, jsonPages_1 = jsonPages; _i < jsonPages_1.length; _i++) {\n                var item = jsonPages_1[_i];\n                var page = this.createCarouselPageInstance(item, context);\n                if (page) {\n                    this._pages.push(page);\n                }\n            }\n        }\n        // everything is parsed do validate on initial page index\n        this.validateParsing(context);\n    };\n    Carousel.prototype.validateParsing = function (context) {\n        if (!this.isValidParsedPageIndex(this.initialPageIndex)) {\n            context.logParseEvent(this, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidInitialPageIndex(this.initialPageIndex));\n        }\n    };\n    Carousel.prototype.internalToJSON = function (target, context) {\n        _super.prototype.internalToJSON.call(this, target, context);\n        context.serializeArray(target, \"pages\", this._pages);\n    };\n    Carousel.prototype.internalRender = function () {\n        var _a;\n        this._renderedPages = [];\n        if (this._pages.length <= 0) {\n            return undefined;\n        }\n        this.validateOrientationProperties();\n        var cardLevelContainer = document.createElement(\"div\");\n        cardLevelContainer.className = this.hostConfig.makeCssClassName(\"ac-carousel-card-level-container\");\n        var carouselContainer = document.createElement(\"div\");\n        carouselContainer.className = this.hostConfig.makeCssClassName(\"swiper\", \"ac-carousel\");\n        this._carouselPageContainer = carouselContainer;\n        var containerForAdorners = document.createElement(\"div\");\n        containerForAdorners.className = this.hostConfig.makeCssClassName(\"ac-carousel-container\");\n        this._containerForAdorners = containerForAdorners;\n        cardLevelContainer.appendChild(containerForAdorners);\n        var navigationContainer = document.createElement(\"div\");\n        navigationContainer.className = this.hostConfig.makeCssClassName(\"ac-carousel-navigation\");\n        containerForAdorners.appendChild(navigationContainer);\n        var carouselWrapper = document.createElement(\"div\");\n        carouselWrapper.className = this.hostConfig.makeCssClassName(\"swiper-wrapper\", \"ac-carousel-card-container\");\n        carouselWrapper.style.display = \"flex\";\n        switch (this.getEffectiveVerticalContentAlignment()) {\n            case Enums.VerticalAlignment.Top:\n                carouselWrapper.style.alignItems = \"flex-start\";\n                break;\n            case Enums.VerticalAlignment.Bottom:\n                carouselWrapper.style.alignItems = \"flex-end\";\n                break;\n            default:\n                carouselWrapper.style.alignItems = \"center\";\n                break;\n        }\n        if (shared_1.GlobalSettings.useAdvancedCardBottomTruncation) {\n            // Forces the container to be at least as tall as its content.\n            //\n            // Fixes a quirk in Chrome where, for nested flex elements, the\n            // inner element's height would never exceed the outer element's\n            // height. This caused overflow truncation to break -- containers\n            // would always be measured as not overflowing, since their heights\n            // were constrained by their parents as opposed to truly reflecting\n            // the height of their content.\n            //\n            // See the \"Browser Rendering Notes\" section of this answer:\n            // https://stackoverflow.com/questions/36247140/why-doesnt-flex-item-shrink-past-content-size\n            carouselWrapper.style.minHeight = \"-webkit-min-content\";\n        }\n        var prevElementDiv = document.createElement(\"div\");\n        prevElementDiv.className = this.hostConfig.makeCssClassName(\"swiper-button-prev\");\n        var nextElementDiv = document.createElement(\"div\");\n        nextElementDiv.className = this.hostConfig.makeCssClassName(\"swiper-button-next\");\n        if (this.carouselOrientation === Enums.Orientation.Horizontal) {\n            this.updateCssForHorizontalCarousel(prevElementDiv, nextElementDiv);\n        }\n        else {\n            this.updateCssForVerticalCarousel(navigationContainer, prevElementDiv, nextElementDiv);\n        }\n        var pagination = document.createElement(\"div\");\n        pagination.className = this.hostConfig.makeCssClassName(\"swiper-pagination\", \"ac-carousel-pagination\");\n        navigationContainer.appendChild(prevElementDiv);\n        Utils.addCancelSelectActionEventHandler(prevElementDiv);\n        navigationContainer.appendChild(pagination);\n        Utils.addCancelSelectActionEventHandler(pagination);\n        navigationContainer.appendChild(nextElementDiv);\n        Utils.addCancelSelectActionEventHandler(nextElementDiv);\n        if (this.isDesignMode()) {\n            // If we are in design mode, we need to ensure these elements are in front of the peers\n            prevElementDiv.style.zIndex = \"20\";\n            nextElementDiv.style.zIndex = \"20\";\n            pagination.style.zIndex = \"20\";\n        }\n        var requestedNumberOfPages = Math.min(this._pages.length, this.hostConfig.carousel.maxCarouselPages);\n        if (this._pages.length > this.hostConfig.carousel.maxCarouselPages) {\n            console.warn(strings_1.Strings.errors.tooManyCarouselPages);\n        }\n        if (this._pages.length > 0) {\n            for (var i = 0; i < requestedNumberOfPages; i++) {\n                var page = this._pages[i];\n                var renderedItem = this.isElementAllowed(page) ? page.render() : undefined;\n                renderedItem === null || renderedItem === void 0 ? void 0 : renderedItem.classList.add(\"ac-carousel-page\");\n                (_a = renderedItem === null || renderedItem === void 0 ? void 0 : renderedItem.children[0]) === null || _a === void 0 ? void 0 : _a.classList.add(\"ac-carousel-page-container\");\n                if (renderedItem) {\n                    Utils.appendChild(carouselWrapper, renderedItem);\n                    this._renderedPages.push(page);\n                }\n            }\n        }\n        carouselContainer.appendChild(carouselWrapper);\n        carouselContainer.tabIndex = this.isDesignMode() ? -1 : 0;\n        containerForAdorners.appendChild(carouselContainer);\n        // `isRtl()` will set the correct value of rtl by reading the value from the parents\n        this.rtl = this.isRtl();\n        this.applyRTL(pagination);\n        if (!this.isDesignMode()) {\n            if (this.isValidRenderedPageIndex(this.initialPageIndex)) {\n                this._currentIndex = this.initialPageIndex;\n            }\n            else {\n                console.warn(strings_1.Strings.errors.invalidInitialPageIndex(this.initialPageIndex));\n                this._currentIndex = 0;\n            }\n        }\n        this.initializeCarouselControl(carouselContainer, nextElementDiv, prevElementDiv, pagination, this.rtl);\n        return this._renderedPages.length > 0 ? cardLevelContainer : undefined;\n    };\n    Carousel.prototype.applyRTL = function (pagination) {\n        _super.prototype.applyRTL.call(this, this._carouselPageContainer);\n        if (this.rtl) {\n            pagination.classList.add(this.hostConfig.makeCssClassName(\"ac-carousel-pagination-rtl\"));\n        }\n    };\n    Carousel.prototype.validateOrientationProperties = function () {\n        if (!this.carouselHeight) {\n            this.carouselOrientation = Enums.Orientation.Horizontal;\n        }\n    };\n    Carousel.prototype.updateCssForHorizontalCarousel = function (prevElementDiv, nextElementDiv) {\n        prevElementDiv.classList.add(this.hostConfig.makeCssClassName(\"ac-carousel-left\"));\n        nextElementDiv.classList.add(this.hostConfig.makeCssClassName(\"ac-carousel-right\"));\n    };\n    Carousel.prototype.updateCssForVerticalCarousel = function (navigationContainer, prevElementDiv, nextElementDiv) {\n        this._containerForAdorners.classList.add(this.hostConfig.makeCssClassName(\"ac-carousel-container-vertical\"));\n        navigationContainer.classList.add(this.hostConfig.makeCssClassName(\"ac-carousel-navigation-vertical\"));\n        prevElementDiv.classList.add(this.hostConfig.makeCssClassName(\"ac-carousel-up\"));\n        nextElementDiv.classList.add(this.hostConfig.makeCssClassName(\"ac-carousel-down\"));\n    };\n    Carousel.prototype.initializeCarouselControl = function (carouselContainer, nextElement, prevElement, paginationElement, rtl) {\n        var _this = this;\n        var _a, _b, _c;\n        var nextElementAdjustedForRtl = (rtl === undefined || !rtl ? nextElement : prevElement);\n        var prevElementAdjustedForRtl = (rtl === undefined || !rtl ? prevElement : nextElement);\n        var prevElementAdjustedForOrientation = (Enums.Orientation.Horizontal === this.carouselOrientation) ? prevElementAdjustedForRtl : prevElement;\n        var nextElementAdjustedForOrientation = (Enums.Orientation.Horizontal === this.carouselOrientation) ? nextElementAdjustedForRtl : nextElement;\n        var swiperOptions = {\n            loop: !this.isDesignMode() && this.carouselLoop,\n            modules: [swiper_1.Navigation, swiper_1.Pagination, swiper_1.Scrollbar, swiper_1.A11y, swiper_1.History, swiper_1.Keyboard],\n            pagination: {\n                el: paginationElement,\n                clickable: true\n            },\n            navigation: {\n                prevEl: prevElementAdjustedForOrientation,\n                nextEl: nextElementAdjustedForOrientation\n            },\n            a11y: {\n                enabled: true\n            },\n            keyboard: {\n                enabled: false,\n                onlyInViewport: true\n            },\n            direction: this.carouselOrientation === Enums.Orientation.Horizontal ? \"horizontal\" : \"vertical\",\n            resizeObserver: false,\n            initialSlide: this._currentIndex\n        };\n        if (this.timer && !this.isDesignMode()) {\n            (_a = swiperOptions.modules) === null || _a === void 0 ? void 0 : _a.push(swiper_1.Autoplay);\n            swiperOptions.autoplay = { delay: this.timer, pauseOnMouseEnter: true };\n        }\n        var carousel = new swiper_1.Swiper(carouselContainer, swiperOptions);\n        // While the 'pauseOnMouseEnter' option should resume autoplay on\n        // mouse exit it doesn't do it, so adding custom events to handle it\n        carouselContainer.addEventListener(\"mouseenter\", function (_event) {\n            var _a;\n            (_a = carousel.autoplay) === null || _a === void 0 ? void 0 : _a.stop();\n        });\n        carouselContainer.addEventListener(\"mouseleave\", function (_event) {\n            var _a;\n            (_a = carousel.autoplay) === null || _a === void 0 ? void 0 : _a.start();\n        });\n        carousel.on('navigationNext', function (swiper) {\n            _this.raiseCarouselEvent(Enums.CarouselInteractionEvent.NavigationNext);\n        });\n        carousel.on('navigationPrev', function (swiper) {\n            _this.raiseCarouselEvent(Enums.CarouselInteractionEvent.NavigationPrevious);\n        });\n        carousel.on('slideChangeTransitionEnd', function (swiper) {\n            _this.currentIndex = swiper.realIndex;\n            _this.raiseCarouselEvent(Enums.CarouselInteractionEvent.Pagination);\n        });\n        carousel.on('autoplay', function () {\n            _this.raiseCarouselEvent(Enums.CarouselInteractionEvent.Autoplay);\n        });\n        carousel.on('paginationRender', function (swiper, paginationEl) {\n            swiper.pagination.bullets.forEach(function (bullet, index) {\n                bullet.addEventListener(\"keypress\", function (event) {\n                    if (event.key == \"Enter\") {\n                        event.preventDefault();\n                        swiper.slideTo(index + 1);\n                    }\n                });\n            });\n        });\n        carousel.on('destroy', function () {\n            _this.destroyResizeObserver();\n        });\n        prevElement.title = (_b = prevElement.ariaLabel) !== null && _b !== void 0 ? _b : strings_1.Strings.defaults.carouselNavigationPreviousTooltip();\n        nextElement.title = (_c = nextElement.ariaLabel) !== null && _c !== void 0 ? _c : strings_1.Strings.defaults.carouselNavigationNextTooltip();\n        this._carousel = carousel;\n        this.createResizeObserver();\n    };\n    Carousel.prototype.createCarouselPageInstance = function (source, context) {\n        return context.parseCardObject(this, source, this.forbiddenChildElements(), !this.isDesignMode(), function (typeName) {\n            return !typeName || typeName === \"CarouselPage\" ? new CarouselPage() : undefined;\n        }, function (typeName, _errorType) {\n            context.logParseEvent(undefined, enums_1.ValidationEvent.ElementTypeNotAllowed, strings_1.Strings.errors.elementTypeNotAllowed(typeName));\n        });\n    };\n    Carousel.prototype.slideTo = function (index) {\n        var _a;\n        (_a = this._carousel) === null || _a === void 0 ? void 0 : _a.slideTo(index);\n    };\n    Object.defineProperty(Carousel.prototype, \"carouselPageContainer\", {\n        get: function () {\n            return this._carouselPageContainer;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Carousel.prototype, \"currentIndex\", {\n        get: function () {\n            return this._currentIndex;\n        },\n        set: function (currentIndex) {\n            this._currentIndex = currentIndex;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Carousel.prototype.createCarouselEvent = function (type) {\n        var currentPageId;\n        if (this.currentPageIndex != undefined) {\n            currentPageId = this.getItemAt(this.currentPageIndex).id;\n        }\n        return new CarouselEvent(type, this.id, currentPageId, this.currentPageIndex);\n    };\n    Carousel.prototype.raiseCarouselEvent = function (eventType) {\n        var card = this.parent ? this.parent.getRootElement() : undefined;\n        var onCarouselEventHandler = card && card.onCarouselEvent\n            ? card.onCarouselEvent\n            : card_elements_1.AdaptiveCard.onCarouselEvent;\n        // pagination event is triggered on slide transition end event \n        if (onCarouselEventHandler && eventType == Enums.CarouselInteractionEvent.Pagination) {\n            // returns the event type that causes slide transition\n            onCarouselEventHandler(this.createCarouselEvent(this.previousEventType));\n        }\n        this.previousEventType = eventType;\n    };\n    /// Swiper version 8 added requestAnimationFrame() call in its resize observer code\n    /// The new call causes flickering issue,\n    /// We've copied resize observer code from Swiper version 7 with some modifications\n    Carousel.prototype.createResizeObserver = function () {\n        var _this = this;\n        var _a;\n        if (!this.checkIfCarouselInValidStateForResizeEvent()) {\n            return;\n        }\n        this._observer = new ResizeObserver(function (entries) {\n            var _a, _b, _c, _d;\n            var width = (_a = _this._carousel) === null || _a === void 0 ? void 0 : _a.width;\n            var height = (_b = _this._carousel) === null || _b === void 0 ? void 0 : _b.height;\n            var newWidth = width;\n            var newHeight = height;\n            entries.forEach(function (_a) {\n                var _b;\n                var contentBoxSize = _a.contentBoxSize, contentRect = _a.contentRect, target = _a.target;\n                if (target && target !== ((_b = _this._carousel) === null || _b === void 0 ? void 0 : _b.el)) {\n                    return;\n                }\n                newWidth = contentRect\n                    ? contentRect.width\n                    : (contentBoxSize[0] || contentBoxSize).inlineSize;\n                newHeight = contentRect\n                    ? contentRect.height\n                    : (contentBoxSize[0] || contentBoxSize).blockSize;\n            });\n            if (newWidth !== width || newHeight !== height) {\n                if (_this.checkIfCarouselInValidStateForResizeEvent()) {\n                    (_c = _this._carousel) === null || _c === void 0 ? void 0 : _c.emit('beforeResize');\n                    (_d = _this._carousel) === null || _d === void 0 ? void 0 : _d.emit('resize');\n                }\n            }\n        });\n        this._observer.observe((_a = this._carousel) === null || _a === void 0 ? void 0 : _a.el);\n    };\n    Carousel.prototype.destroyResizeObserver = function () {\n        var _a;\n        if (this._observer && this._observer.unobserve && ((_a = this._carousel) === null || _a === void 0 ? void 0 : _a.el)) {\n            this._observer.unobserve(this._carousel.el);\n            this._observer = null;\n        }\n    };\n    ;\n    Carousel.prototype.checkIfCarouselInValidStateForResizeEvent = function () {\n        return this._carousel && !this._carousel.destroyed;\n    };\n    Carousel.timerProperty = new serialization_1.NumProperty(serialization_1.Versions.v1_6, \"timer\", undefined);\n    Carousel.initialPageProperty = new serialization_1.NumProperty(serialization_1.Versions.v1_6, \"initialPage\", 0);\n    Carousel.loopProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_6, \"loop\", true);\n    Carousel.orientationProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_6, \"orientation\", Enums.Orientation, Enums.Orientation.Horizontal);\n    Carousel.carouselHeightProperty = new serialization_1.PixelSizeProperty(serialization_1.Versions.v1_6, \"heightInPixels\");\n    __decorate([\n        (0, serialization_1.property)(Carousel.timerProperty)\n    ], Carousel.prototype, \"timer\", null);\n    __decorate([\n        (0, serialization_1.property)(Carousel.initialPageProperty)\n    ], Carousel.prototype, \"initialPageIndex\", null);\n    __decorate([\n        (0, serialization_1.property)(Carousel.loopProperty)\n    ], Carousel.prototype, \"carouselLoop\", void 0);\n    __decorate([\n        (0, serialization_1.property)(Carousel.orientationProperty)\n    ], Carousel.prototype, \"carouselOrientation\", void 0);\n    __decorate([\n        (0, serialization_1.property)(Carousel.carouselHeightProperty)\n    ], Carousel.prototype, \"carouselHeight\", void 0);\n    return Carousel;\n}(card_elements_1.Container));\nexports.Carousel = Carousel;\nvar CarouselEvent = /** @class */ (function () {\n    function CarouselEvent(type, carouselId, activeCarouselPageId, activeCarouselPageIndex) {\n        this.type = type;\n        this.carouselId = carouselId;\n        this.activeCarouselPageId = activeCarouselPageId;\n        this.activeCarouselPageIndex = activeCarouselPageIndex;\n    }\n    return CarouselEvent;\n}());\nexports.CarouselEvent = CarouselEvent;\nregistry_1.GlobalRegistry.defaultElements.register(\"Carousel\", Carousel, serialization_1.Versions.v1_6);\n"},"sourceMaps":{"js":{"version":3,"file":"carousel.js","sourceRoot":"","sources":["../src/carousel.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (C) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nimport {\n    AdaptiveCard,\n    ActionType,\n    CardElement,\n    Container,\n    SerializationContext,\n    ShowCardAction,\n    ToggleVisibilityAction\n} from \"./card-elements\";\nimport * as Enums from \"./enums\";\nimport {\n    BoolProperty,\n    NumProperty,\n    EnumProperty,\n    property,\n    PropertyBag,\n    SerializableObjectSchema,\n    Versions,\n    PixelSizeProperty\n} from \"./serialization\";\nimport { GlobalRegistry } from \"./registry\";\nimport { TypeErrorType, ValidationEvent } from \"./enums\";\nimport { Strings } from \"./strings\";\nimport {\n    Swiper,\n    A11y,\n    Autoplay,\n    History,\n    Keyboard,\n    Navigation,\n    Pagination,\n    Scrollbar,\n    SwiperOptions\n} from \"swiper\";\nimport * as Utils from \"./utils\";\nimport { GlobalSettings } from \"./shared\";\n\n// Note: to function correctly, consumers need to have CSS from swiper/css, swiper/css/pagination, and\n// swiper/css/navigation\n\nexport class CarouselPage extends Container {\n    //#region Schema\n    protected populateSchema(schema: SerializableObjectSchema) {\n        super.populateSchema(schema);\n\n        // `style`, `bleed`, `isVisible` are not supported in CarouselPage\n        schema.remove(Container.styleProperty);\n        schema.remove(Container.bleedProperty);\n        schema.remove(Container.isVisibleProperty);\n    }\n    //#endregion\n\n    protected internalRender(): HTMLElement | undefined {\n        const carouselSlide: HTMLElement = document.createElement(\"div\");\n        carouselSlide.className = this.hostConfig.makeCssClassName(\"swiper-slide\");\n        // `isRtl()` will set the correct value of rtl by reading the value from the parents\n        this.rtl = this.isRtl();\n        const renderedElement = super.internalRender();\n        Utils.appendChild(carouselSlide, renderedElement);\n        return carouselSlide;\n    }\n\n    getForbiddenActionTypes(): ActionType[] {\n        return [ShowCardAction, ToggleVisibilityAction];\n    }\n\n    getForbiddenChildElements(): string[] {\n        return this.forbiddenChildElements();\n    }\n\n    protected forbiddenChildElements(): string[] {\n        return [\n            ToggleVisibilityAction.JsonTypeName,\n            ShowCardAction.JsonTypeName,\n            \"Media\",\n            \"ActionSet\",\n            \"Input.Text\",\n            \"Input.Date\",\n            \"Input.Time\",\n            \"Input.Number\",\n            \"Input.ChoiceSet\",\n            \"Input.Toggle\",\n            \"Carousel\",\n            ...super.forbiddenChildElements()\n        ];\n    }\n\n    protected internalParse(source: any, context: SerializationContext) {\n        super.internalParse(source, context);\n\n        this.setShouldFallback(false);\n    }\n\n    protected shouldSerialize(_context: SerializationContext): boolean {\n        return true;\n    }\n\n    getJsonTypeName(): string {\n        return \"CarouselPage\";\n    }\n\n    get isStandalone(): boolean {\n        return false;\n    }\n\n    get hasVisibleSeparator(): boolean {\n        return false;\n    }\n}\n\nexport class Carousel extends Container {\n    //#region Schema\n    protected populateSchema(schema: SerializableObjectSchema) {\n        super.populateSchema(schema);\n\n        // `style`, `bleed`, `isVisible` are not supported in Carousel\n        schema.remove(Container.styleProperty);\n        schema.remove(Container.bleedProperty);\n        schema.remove(Container.isVisibleProperty);\n    }\n\n    static readonly timerProperty = new NumProperty(Versions.v1_6, \"timer\", undefined);\n    @property(Carousel.timerProperty)\n    get timer(): number | undefined {\n        let timer = this.getValue(Carousel.timerProperty);\n\n        if (timer && timer < this.hostConfig.carousel.minAutoplayDelay) {\n            console.warn(Strings.errors.tooLittleTimeDelay);\n            timer = this.hostConfig.carousel.minAutoplayDelay;\n        }\n\n        return timer;\n    }\n\n    set timer(value: number | undefined) {\n        if (value && value < this.hostConfig.carousel.minAutoplayDelay) {\n            console.warn(Strings.errors.tooLittleTimeDelay);\n            this.setValue(Carousel.timerProperty, this.hostConfig.carousel.minAutoplayDelay);\n        } else {\n            this.setValue(Carousel.timerProperty, value);\n        }\n    }\n\n    static readonly initialPageProperty = new NumProperty(Versions.v1_6, \"initialPage\", 0);\n    @property(Carousel.initialPageProperty)\n    get initialPageIndex(): number {\n        return this.getValue(Carousel.initialPageProperty); \n    }\n\n    set initialPageIndex(value: number) { \n        if (this.isValidParsedPageIndex(value)) { \n            this.setValue(Carousel.initialPageProperty, value);\n        } else { \n            console.warn(Strings.errors.invalidInitialPageIndex(value));\n            this.setValue(Carousel.initialPageProperty, 0); \n        }\n    }\n\n    static readonly loopProperty = new BoolProperty(Versions.v1_6, \"loop\", true);\n    @property(Carousel.loopProperty)\n    carouselLoop: boolean = true;\n    \n    static readonly orientationProperty = new EnumProperty(\n        Versions.v1_6,\n        \"orientation\",\n        Enums.Orientation,\n        Enums.Orientation.Horizontal\n    );\n    @property(Carousel.orientationProperty)\n    carouselOrientation: Enums.Orientation = Enums.Orientation.Horizontal; \n\n    static readonly carouselHeightProperty = new PixelSizeProperty(\n        Versions.v1_6,\n        \"heightInPixels\"\n    );\n    @property(Carousel.carouselHeightProperty)\n    carouselHeight?: number;\n    \n    private isValidParsedPageIndex(index: number) : boolean {\n        return this._pages ? this.isValidPageIndex(index, this._pages.length) : false;\n    }\n\n    private isValidRenderedPageIndex(index: number) : boolean {\n        return this._renderedPages ? this.isValidPageIndex(index, this._renderedPages.length) : false;\n    }\n\n    private isValidPageIndex(index: number, collectionSize: number) {\n        return (collectionSize > 0 && 0 <= index && index < collectionSize);\n    }\n\n    //#endregion\n\n    get previousEventType(): Enums.CarouselInteractionEvent {\n        return this._previousEventType;\n    }\n\n    set previousEventType(eventType: Enums.CarouselInteractionEvent) {\n        this._previousEventType = eventType;\n    }\n\n    private _pages: CarouselPage[] = [];\n    private _renderedPages: CarouselPage[];\n    private _carouselPageContainer: HTMLElement;\n    private _containerForAdorners: HTMLElement;\n    private _currentIndex: number = 0;\n    private _previousEventType: Enums.CarouselInteractionEvent = Enums.CarouselInteractionEvent.Pagination;\n    private _observer: ResizeObserver | null;\n    private _carousel: Swiper | null;\n\n    // Question: Why do we place this on the Carousel instead of the CarouselPage?\n    protected forbiddenChildElements(): string[] {\n        return [\n            ToggleVisibilityAction.JsonTypeName,\n            ShowCardAction.JsonTypeName,\n            \"Media\",\n            \"ActionSet\",\n            \"Input.Text\",\n            \"Input.Date\",\n            \"Input.Time\",\n            \"Input.Number\",\n            \"Input.ChoiceSet\",\n            \"Input.Toggle\",\n            ...super.forbiddenChildElements()\n        ];\n    }\n\n    protected adjustRenderedElementSize(renderedElement: HTMLElement) {\n        super.adjustRenderedElementSize(renderedElement);\n        if (this.height == \"stretch\" && this._containerForAdorners !== undefined) { \n            this._containerForAdorners.style.height = \"100%\";\n        }\n\n        // Assign the explicit height to carouselPageContainer if given\n        if (this.carouselHeight) {\n            this._carouselPageContainer.style.height = this.carouselHeight + \"px\";\n        }\n    }\n\n    getJsonTypeName(): string {\n        return \"Carousel\";\n    }\n\n    getItemCount(): number {\n        return this._pages.length;\n    }\n\n    getItemAt(index: number): CardElement {\n        return this._pages[index];\n    }\n\n    addPage(page: CarouselPage) {\n        this._pages.push(page);\n        page.setParent(this);\n    }\n\n    removeItem(item: CardElement): boolean {\n        if (item instanceof CarouselPage) {\n            const itemIndex = this._pages.indexOf(item);\n\n            if (itemIndex >= 0) {\n                this._pages.splice(itemIndex, 1);\n\n                item.setParent(undefined);\n\n                this.updateLayout();\n\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    getFirstVisibleRenderedItem(): CardElement | undefined {\n        if (this.renderedElement && this._renderedPages?.length > 0) {\n            return this._renderedPages[0];\n        } else {\n            return undefined;\n        }\n    }\n\n    getLastVisibleRenderedItem(): CardElement | undefined {\n        if (this.renderedElement && this._renderedPages?.length > 0) {\n            return this._renderedPages[this._renderedPages.length - 1];\n        } else {\n            return undefined;\n        }\n    }\n\n    get currentPageId(): string | undefined {\n        if (this._carousel?.slides?.length) {\n            const activeSlide = this._carousel.slides[this._carousel.activeIndex] as HTMLElement;\n            return activeSlide.id;\n        }\n        return undefined;\n    }\n\n    get currentPageIndex(): number | undefined {\n        return this._carousel?.realIndex;\n    }\n\n    protected internalParse(source: any, context: SerializationContext) {\n        super.internalParse(source, context);\n\n        this._pages = [];\n\n        const jsonPages = source[\"pages\"];\n        if (Array.isArray(jsonPages)) {\n            for (const item of jsonPages) {\n                const page = this.createCarouselPageInstance(item, context);\n                if (page) {\n                    this._pages.push(page);\n                }\n            }\n        }\n\n        // everything is parsed do validate on initial page index\n        this.validateParsing(context);\n    }\n\n    private validateParsing(context: SerializationContext) {\n        if (!this.isValidParsedPageIndex(this.initialPageIndex)) {\n            context.logParseEvent(\n                this,\n                Enums.ValidationEvent.InvalidPropertyValue,\n                Strings.errors.invalidInitialPageIndex(this.initialPageIndex)\n            );\n        }\n    }\n\n    protected internalToJSON(target: PropertyBag, context: SerializationContext) {\n        super.internalToJSON(target, context);\n\n        context.serializeArray(target, \"pages\", this._pages);\n    }\n\n    protected internalRender(): HTMLElement | undefined {\n        this._renderedPages = [];\n\n        if (this._pages.length <= 0) {\n            return undefined;\n        }\n\n        this.validateOrientationProperties();\n\n        const cardLevelContainer: HTMLElement = document.createElement(\"div\");\n        cardLevelContainer.className = this.hostConfig.makeCssClassName(\"ac-carousel-card-level-container\");\n\n        const carouselContainer: HTMLElement = document.createElement(\"div\");\n        carouselContainer.className = this.hostConfig.makeCssClassName(\"swiper\", \"ac-carousel\");\n        this._carouselPageContainer = carouselContainer;\n\n        const containerForAdorners: HTMLElement = document.createElement(\"div\");\n        containerForAdorners.className = this.hostConfig.makeCssClassName(\"ac-carousel-container\");\n        this._containerForAdorners = containerForAdorners;\n\n        cardLevelContainer.appendChild(containerForAdorners);\n        \n        const navigationContainer: HTMLElement = document.createElement(\"div\");\n        navigationContainer.className = this.hostConfig.makeCssClassName(\"ac-carousel-navigation\");\n        containerForAdorners.appendChild(navigationContainer);\n\n        const carouselWrapper: HTMLElement = document.createElement(\"div\");\n        carouselWrapper.className = this.hostConfig.makeCssClassName(\n            \"swiper-wrapper\",\n            \"ac-carousel-card-container\"\n        );\n        carouselWrapper.style.display = \"flex\";\n\n        switch (this.getEffectiveVerticalContentAlignment()) {\n            case Enums.VerticalAlignment.Top:\n                carouselWrapper.style.alignItems = \"flex-start\";\n                break;\n            case Enums.VerticalAlignment.Bottom:\n                carouselWrapper.style.alignItems = \"flex-end\";\n                break;\n            default:\n                carouselWrapper.style.alignItems = \"center\";\n                break;\n        }\n\n        if (GlobalSettings.useAdvancedCardBottomTruncation) {\n            // Forces the container to be at least as tall as its content.\n            //\n            // Fixes a quirk in Chrome where, for nested flex elements, the\n            // inner element's height would never exceed the outer element's\n            // height. This caused overflow truncation to break -- containers\n            // would always be measured as not overflowing, since their heights\n            // were constrained by their parents as opposed to truly reflecting\n            // the height of their content.\n            //\n            // See the \"Browser Rendering Notes\" section of this answer:\n            // https://stackoverflow.com/questions/36247140/why-doesnt-flex-item-shrink-past-content-size\n            carouselWrapper.style.minHeight = \"-webkit-min-content\";\n        }\n\n        const prevElementDiv: HTMLElement = document.createElement(\"div\");\n        prevElementDiv.className = this.hostConfig.makeCssClassName(\n            \"swiper-button-prev\"\n        );\n\n        const nextElementDiv: HTMLElement = document.createElement(\"div\");\n        nextElementDiv.className = this.hostConfig.makeCssClassName(\n            \"swiper-button-next\"\n        );\n\n        if (this.carouselOrientation === Enums.Orientation.Horizontal) {\n            this.updateCssForHorizontalCarousel(prevElementDiv, nextElementDiv);\n        } else {\n            this.updateCssForVerticalCarousel(navigationContainer, prevElementDiv, nextElementDiv);\n        }\n\n        const pagination: HTMLElement = document.createElement(\"div\");\n        pagination.className = this.hostConfig.makeCssClassName(\n            \"swiper-pagination\",\n            \"ac-carousel-pagination\"\n        );\n\n        navigationContainer.appendChild(prevElementDiv);\n        Utils.addCancelSelectActionEventHandler(prevElementDiv);\n\n        navigationContainer.appendChild(pagination);\n        Utils.addCancelSelectActionEventHandler(pagination);\n\n        navigationContainer.appendChild(nextElementDiv);\n        Utils.addCancelSelectActionEventHandler(nextElementDiv);\n\n        if (this.isDesignMode()) {\n            // If we are in design mode, we need to ensure these elements are in front of the peers\n            prevElementDiv.style.zIndex = \"20\";\n            nextElementDiv.style.zIndex = \"20\";\n            pagination.style.zIndex = \"20\";\n        }\n\n        const requestedNumberOfPages: number = Math.min(\n            this._pages.length,\n            this.hostConfig.carousel.maxCarouselPages\n        );\n        if (this._pages.length > this.hostConfig.carousel.maxCarouselPages) {\n            console.warn(Strings.errors.tooManyCarouselPages);\n        }\n\n        if (this._pages.length > 0) {\n            for (let i = 0; i < requestedNumberOfPages; i++) {\n                const page = this._pages[i];\n                const renderedItem = this.isElementAllowed(page) ? page.render() : undefined;\n                renderedItem?.classList.add(\"ac-carousel-page\");\n                renderedItem?.children[0]?.classList.add(\"ac-carousel-page-container\");\n\n                if (renderedItem) {\n                    Utils.appendChild(carouselWrapper, renderedItem);\n                    this._renderedPages.push(page);\n                }\n            }\n        }\n\n        carouselContainer.appendChild(carouselWrapper);\n\n        carouselContainer.tabIndex = this.isDesignMode() ? -1 : 0;\n\n        containerForAdorners.appendChild(carouselContainer);\n\n        // `isRtl()` will set the correct value of rtl by reading the value from the parents\n        this.rtl = this.isRtl();\n        this.applyRTL(pagination);\n\n        if (!this.isDesignMode()) {\n            if (this.isValidRenderedPageIndex(this.initialPageIndex)) {\n                this._currentIndex = this.initialPageIndex;\n            } else {\n                console.warn(Strings.errors.invalidInitialPageIndex(this.initialPageIndex));\n                this._currentIndex = 0\n            }\n        }\n\n        this.initializeCarouselControl(\n            carouselContainer,\n            nextElementDiv,\n            prevElementDiv,\n            pagination,\n            this.rtl\n        );\n\n        return this._renderedPages.length > 0 ? cardLevelContainer : undefined;\n    }\n\n    applyRTL(pagination: HTMLElement) {\n        super.applyRTL(this._carouselPageContainer);\n        if (this.rtl) {\n            pagination.classList.add(this.hostConfig.makeCssClassName(\n                \"ac-carousel-pagination-rtl\"\n            ));\n        }\n    }\n\n    validateOrientationProperties() {\n        if (!this.carouselHeight) {\n            this.carouselOrientation = Enums.Orientation.Horizontal;\n        }\n    }\n\n    updateCssForHorizontalCarousel(\n        prevElementDiv: HTMLElement,\n        nextElementDiv: HTMLElement\n    ) {\n        prevElementDiv.classList.add(this.hostConfig.makeCssClassName(\n            \"ac-carousel-left\"\n        ));\n        nextElementDiv.classList.add(this.hostConfig.makeCssClassName(\n            \"ac-carousel-right\"\n        ));\n    }\n\n    updateCssForVerticalCarousel(\n        navigationContainer: HTMLElement,\n        prevElementDiv: HTMLElement,\n        nextElementDiv: HTMLElement\n    ) {\n        this._containerForAdorners.classList.add(this.hostConfig.makeCssClassName(\n            \"ac-carousel-container-vertical\"\n        ));\n        navigationContainer.classList.add(this.hostConfig.makeCssClassName(\n            \"ac-carousel-navigation-vertical\"\n        ))\n\n        prevElementDiv.classList.add(this.hostConfig.makeCssClassName(\n            \"ac-carousel-up\"\n        ));\n        nextElementDiv.classList.add(this.hostConfig.makeCssClassName(\n            \"ac-carousel-down\"\n        ));\n    }\n\n    private initializeCarouselControl(\n        carouselContainer: HTMLElement,\n        nextElement: HTMLElement,\n        prevElement: HTMLElement,\n        paginationElement: HTMLElement,\n        rtl: boolean | undefined\n    ): void {\n\n        const nextElementAdjustedForRtl = (rtl === undefined || !rtl ? nextElement : prevElement);\n        const prevElementAdjustedForRtl = (rtl === undefined || !rtl ? prevElement : nextElement);\n\n        const prevElementAdjustedForOrientation = (Enums.Orientation.Horizontal === this.carouselOrientation) ? prevElementAdjustedForRtl : prevElement;\n        const nextElementAdjustedForOrientation = (Enums.Orientation.Horizontal === this.carouselOrientation) ? nextElementAdjustedForRtl : nextElement;\n\n        const swiperOptions: SwiperOptions = {\n            loop: !this.isDesignMode() && this.carouselLoop,\n            modules: [Navigation, Pagination, Scrollbar, A11y, History, Keyboard],\n            pagination: {\n                el: paginationElement,\n                clickable: true\n            },\n            navigation: {\n                prevEl: prevElementAdjustedForOrientation,\n                nextEl: nextElementAdjustedForOrientation\n            },\n            a11y: {\n                enabled: true\n            },\n            keyboard: {\n                enabled: false,\n                onlyInViewport: true\n            },\n            direction: this.carouselOrientation === Enums.Orientation.Horizontal ? \"horizontal\" : \"vertical\",\n            resizeObserver: false,\n            initialSlide: this._currentIndex\n        };\n\n        if (this.timer && !this.isDesignMode()) {\n            swiperOptions.modules?.push(Autoplay);\n            swiperOptions.autoplay = { delay: this.timer, pauseOnMouseEnter: true };\n        }\n\n        const carousel: Swiper = new Swiper(carouselContainer, swiperOptions);\n\n        // While the 'pauseOnMouseEnter' option should resume autoplay on\n        // mouse exit it doesn't do it, so adding custom events to handle it\n\n        carouselContainer.addEventListener(\"mouseenter\", function (_event) {\n            carousel.autoplay?.stop();\n        });\n\n        carouselContainer.addEventListener(\"mouseleave\", function (_event) {\n            carousel.autoplay?.start();\n        });\n\n        carousel.on('navigationNext',  (swiper: Swiper) => {\n            this.raiseCarouselEvent(Enums.CarouselInteractionEvent.NavigationNext);\n        });\n\n        carousel.on('navigationPrev',  (swiper: Swiper) => {\n            this.raiseCarouselEvent(Enums.CarouselInteractionEvent.NavigationPrevious);\n        });\n\n        carousel.on('slideChangeTransitionEnd',  (swiper: Swiper) => {\n            this.currentIndex = swiper.realIndex;\n            this.raiseCarouselEvent(Enums.CarouselInteractionEvent.Pagination); \n        });\n\n        carousel.on('autoplay',  () => {\n            this.raiseCarouselEvent(Enums.CarouselInteractionEvent.Autoplay);\n        });\n\n        carousel.on('paginationRender', (swiper, paginationEl) => {\n            swiper.pagination.bullets.forEach((bullet, index) => {\n                bullet.addEventListener(\"keypress\", function(event : KeyboardEvent) {\n                    if (event.key == \"Enter\") {\n                        event.preventDefault();\n                        swiper.slideTo(index + 1);\n                    }\n                });\n            });\n        });\n\n        carousel.on('destroy', () => {\n            this.destroyResizeObserver();\n        });\n\n        prevElement.title = prevElement.ariaLabel ?? Strings.defaults.carouselNavigationPreviousTooltip();\n\n        nextElement.title = nextElement.ariaLabel ?? Strings.defaults.carouselNavigationNextTooltip();\n\n        this._carousel = carousel;\n\n        this.createResizeObserver();\n    }\n\n    private createCarouselPageInstance(\n        source: any,\n        context: SerializationContext\n    ): CarouselPage | undefined {\n        return context.parseCardObject<CarouselPage>(\n            this,\n            source,\n            this.forbiddenChildElements(),\n            !this.isDesignMode(),\n            (typeName: string) => {\n                return !typeName || typeName === \"CarouselPage\" ? new CarouselPage() : undefined;\n            },\n            (typeName: string, _errorType: TypeErrorType) => {\n                context.logParseEvent(\n                    undefined,\n                    ValidationEvent.ElementTypeNotAllowed,\n                    Strings.errors.elementTypeNotAllowed(typeName)\n                );\n            }\n        );\n    }\n\n    slideTo(index: number) {\n        this._carousel?.slideTo(index);\n    }\n\n    get carouselPageContainer() {\n        return this._carouselPageContainer;\n    }\n\n    get currentIndex(): number {\n        return this._currentIndex;\n    }\n\n    set currentIndex(currentIndex: number) {\n        this._currentIndex = currentIndex;\n    }\n\n    private createCarouselEvent (type : Enums.CarouselInteractionEvent): CarouselEvent\n    {\n        let currentPageId : string | undefined;\n        if (this.currentPageIndex != undefined) {\n            currentPageId = this.getItemAt(this.currentPageIndex).id;\n        }\n        return new CarouselEvent(type, this.id, currentPageId, this.currentPageIndex);   \n    }\n\n    private raiseCarouselEvent(eventType : Enums.CarouselInteractionEvent) {\n        const card = this.parent ? (this.parent.getRootElement() as AdaptiveCard) : undefined;\n        const onCarouselEventHandler = \n            card && card.onCarouselEvent\n                ? card.onCarouselEvent\n                : AdaptiveCard.onCarouselEvent;\n        // pagination event is triggered on slide transition end event \n        if (onCarouselEventHandler && eventType == Enums.CarouselInteractionEvent.Pagination) {\n        // returns the event type that causes slide transition\n            onCarouselEventHandler(this.createCarouselEvent(this.previousEventType));\n        }\n        this.previousEventType = eventType;\n    }\n\n    /// Swiper version 8 added requestAnimationFrame() call in its resize observer code\n    /// The new call causes flickering issue,\n    /// We've copied resize observer code from Swiper version 7 with some modifications\n    private createResizeObserver() : void {\n\n        if (!this.checkIfCarouselInValidStateForResizeEvent()) {\n            return;\n        }\n\n        this._observer = new ResizeObserver((entries) => {\n            const width = this._carousel?.width;\n            const height = this._carousel?.height;\n            let newWidth = width;\n            let newHeight = height;\n            entries.forEach(({ contentBoxSize, contentRect, target }) => {\n            if (target && target !== this._carousel?.el) {\n                return;\n            }\n\n            newWidth = contentRect\n                ? contentRect.width\n                : (contentBoxSize[0] || contentBoxSize).inlineSize;\n\n            newHeight = contentRect\n                ? contentRect.height\n                : (contentBoxSize[0] || contentBoxSize).blockSize;\n            });\n\n            if (newWidth !== width || newHeight !== height) {\n                if (this.checkIfCarouselInValidStateForResizeEvent()) {\n                    this._carousel?.emit('beforeResize');\n                    this._carousel?.emit('resize');\n                }\n            }\n\n        });\n\n        this._observer.observe(this._carousel?.el!);\n    }\n\n    private destroyResizeObserver(): void {\n        if (this._observer && this._observer.unobserve && this._carousel?.el) {\n            this._observer.unobserve(this._carousel.el);\n            this._observer = null;\n        }\n    };\n\n    private checkIfCarouselInValidStateForResizeEvent()\n    {\n        return this._carousel && !this._carousel.destroyed;\n    }\n}\n\nexport class CarouselEvent {\n    constructor(public type : Enums.CarouselInteractionEvent,\n        public carouselId : string | undefined,\n        public activeCarouselPageId : string | undefined,\n        public activeCarouselPageIndex : number | undefined) {}\n}\n\nGlobalRegistry.defaultElements.register(\n    \"Carousel\",\n    Carousel,\n    Versions.v1_6\n);\n\n"]}},"error":null,"hash":"e9a071796efd81a607f9d590d27ce51d","cacheData":{"env":{}}}